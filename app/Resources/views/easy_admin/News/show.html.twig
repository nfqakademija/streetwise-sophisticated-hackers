{% extends '@AppBundle/views/easy_admin/show.html.twig' %}
{% form_theme comment_form with easyadmin_config('design.form_theme') %}

{% block main %}
    <div class="form-horizontal">
        {% for field, metadata in fields %}
            <div class="form-group field-{{ metadata.type|default('default')|lower }} {{ metadata.css_class|default('') }}">
                <label class="col-sm-2 control-label">
                    {{ (metadata.label ?: field|humanize)|trans(_trans_parameters)|raw }}
                </label>
                <div class="col-sm-10">
                    <div class="form-control">
                        {{ easyadmin_render_field_for_show_view(_entity_config.name, entity, metadata) }}
                    </div>

                    {% if metadata.help|default('') != '' %}
                        <span class="help-block"><i class="fa fa-info-circle"></i> {{ metadata.help|trans|raw }}</span>
                    {% endif %}
                </div>
            </div>
        {% endfor %}

        <div class="form-group form-actions">
            <div class="col-sm-10 col-sm-offset-2">
                {% block item_actions %}
                    {% set _show_actions = custom_get_actions_for_show_item(_entity_config.name, entity) %}
                    {% set _request_parameters = { entity: _entity_config.name, referer: app.request.query.get('referer') } %}

                    {% for action in _show_actions %}
                        {% if 'list' == action.name %}
                            {% set action_href = _request_parameters.referer|default('') ? _request_parameters.referer|easyadmin_urldecode : path('easyadmin', _request_parameters|merge({ action: 'list' })) %}
                        {% elseif 'method' == action.type %}
                            {% set action_href = path('easyadmin', _request_parameters|merge({ action: action.name, id: _entity_id })) %}
                        {% elseif 'route' == action.type %}
                            {% set action_href = path(action.name, _request_parameters|merge({ action: action.name, id: _entity_id })) %}
                        {% endif %}

                        <a class="{{ action.css_class|default('') }}" href="{{ action_href }}" target="{{ action.target }}">
                            {%- if action.icon %}<i class="fa fa-{{ action.icon }}"></i> {% endif -%}
                            {%- if action.label is defined and not action.label is empty -%}
                                {{ action.label|trans(arguments = _trans_parameters|merge({ '%entity_id%': _entity_id }), domain = _entity_config.translation_domain) }}
                            {%- endif -%}
                        </a>
                    {% endfor %}
                {% endblock item_actions %}
            </div>
        </div>
    </div>

    {% block delete_form %}
        {{ parent() }}
    {% endblock delete_form %}

    <h4>{{ 'new.comment'|trans(_trans_parameters, 'EasyAdminBundle') }}</h4>
    <div class="form-horizontal">
        {{ form_start(comment_form) }}
        {{ form_widget(comment_form) }}
        <input type="submit" />
        {{ form_end(comment_form) }}
    </div>

    {% if comments %}
    {{
        include(
            '@AppBundle/views/easy_admin/Comment/included_list.html.twig',
            {
                comments: comments,
                _trans_parameters: _trans_parameters
            },
            with_context = false)
    }}
    {% endif %}

{% endblock %}
