{% extends '@EasyAdmin/default/show.html.twig' %}

{% block item_actions %}
    {% set _show_actions = easyadmin_get_actions_for_show_item(_entity_config.name) %}
    {% set _request_parameters = { entity: _entity_config.name, referer: app.request.query.get('referer') } %}

    {% for action in _show_actions if has_common(app.user.roles, action.roles) or _entity_id == app.user.id %}
        {% if 'list' == action.name %}
            {% set action_href = _request_parameters.referer|default('') ? _request_parameters.referer|easyadmin_urldecode : path('easyadmin', _request_parameters|merge({ action: 'list' })) %}
        {% elseif 'method' == action.type %}
            {% set action_href = path('easyadmin', _request_parameters|merge({ action: action.name, id: _entity_id })) %}
        {% elseif 'route' == action.type %}
            {% set action_href = path(action.name, _request_parameters|merge({ action: action.name, id: _entity_id })) %}
        {% endif %}

        <a class="{{ action.css_class|default('') }}" href="{{ action_href }}" target="{{ action.target }}">
            {%- if action.icon %}<i class="fa fa-{{ action.icon }}"></i> {% endif -%}
            {%- if action.label is defined and not action.label is empty -%}
                {{ action.label|trans(arguments = _trans_parameters|merge({ '%entity_id%': _entity_id }), domain = _entity_config.translation_domain) }}
            {%- endif -%}
        </a>
    {% endfor %}
{% endblock item_actions %}
